trigger:
  - main  # âœ… Run when pushing to the 'main' branch

pool:
  name: Default  # âœ… Your custom pool
  demands:
    - agent.name -equals agent1  # âœ… Force use of self-hosted agent1

steps:
  - checkout: self  # âœ… Makes sure your code is pulled into the pipeline workspace

  - task: NodeTool@0
    inputs:
      versionSpec: '16.x'
    displayName: 'ğŸ“¦ Install Node.js'

  - script: |
      echo "ğŸ“‚ Listing files to verify package.json exists:"
      dir
    displayName: 'ğŸ“ Verify working directory'

  - script: |
      npm install
    displayName: 'ğŸ“¥ Install dependencies'

  - script: |
      npm run build || echo "âš ï¸ No build script defined in package.json"
    displayName: 'ğŸ› ï¸ Build the app'

  - script: echo "âœ… CI pipeline finished successfully"
    displayName: 'âœ… Post-build step'
